

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Custom Completers &mdash; IPython</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="IPython" href="index.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <div class="logo"><a href="index.html">
            <img class="logo" src="_static/banner.png" alt="Logo"/>
          </a></div>
       
        <div class="rel">
          <a href="index.html">Home</a> · 
<a href="download.html">Download</a> · 
<a href="documentation.html">Documentation</a> · 
<a href="news.html">News</a> · 
<a href="citing.html">Citation</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
             
            
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"> 
<div class="sidebarblock">
<h3>Versions</h3>

<div class="tile"><h4>Stable</h4>
     0.10.2 &ndash; April&nbsp;2011<br/>
    <a href="download.html">Download</a>
</div>

<div class="tile"><h4>Development</h4>
    pre-0.11<br/>
    <a href="https://github.com/ipython/ipython">Github</a>
</div>
</div>
<div class="sidebarblock">
<h3>Links</h3>

  <ul class="simple">
    <li><a class="reference external" href="https://github.com/ipython/ipython/issues">
            Issue tracker</a></li>
    <li>Mailing lists:<br/><span style="padding-left: 1em;">
        <a class="reference external" href="http://projects.scipy.org/mailman/listinfo/ipython-user">
            User</a> · 
        <a class="reference external" href="http://projects.scipy.org/mailman/listinfo/ipython-dev">
            Dev</a>
        </li></span>
    <li><a class="reference external" href="http://webchat.freenode.net/?channels=ipython&uio=d4">
            IRC channel</a><br/>
            <span style="font-size: 0.7em; padding-left: 1em;">(Freenode, #ipython)</span></li>
  </ul>
</div>

<div class="sidebarblock">
  <h3>More Info</h3>
  <ul class="simple">
    <li><a href="faq.html">FAQ</a></li>
    <li><a class="reference external"
    href="presentation.html">Presentations</a></li>
    <li><a class="reference external"
    href="http://ipython.scipy.org/moin/Cookbook">Cookbook</a></li>
    <li><a class="reference external"
    href="http://ipython.scipy.org/moin/Developer_Zone">Developer Zone</a></li>
    <li><a class="reference external"
    href="http://ipython.scipy.org/moin/About/Projects_Using_IPython">Projects using IPython</a></li>
  </ul>          
</div>
        </div>
      </div>
        
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="custom-completers">
<h1>Custom Completers<a class="headerlink" href="#custom-completers" title="Permalink to this headline">¶</a></h1>
<p>You can write your own completer e.g. to make using your favourite command line programs quicker.</p>
<p>You can look at <a class="reference external" href="http://projects.scipy.org/ipython/ipython/browser/ipython/trunk/IPython/Extensions/ipy_stock_completers.py">ipy_stock_completers.py</a>] for examples on how to build your own completer. The key is writing a function like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">apt_completers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; This should return a list of strings with possible completions.</span>

<span class="sd">    Note that all the included strings that don&#39;t start with event.symbol</span>
<span class="sd">    are removed, in order to not confuse readline.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="p">[</span><span class="s">&#39;update&#39;</span><span class="p">,</span> <span class="s">&#39;upgrade&#39;</span><span class="p">,</span> <span class="s">&#39;install&#39;</span><span class="p">,</span> <span class="s">&#39;remove&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Where you can examine event.line (whole line), event.symbol (the symbol under completion right now) and event.command (the first word in line, for convenience).</p>
<p>After that, you need to hook the completer with IPython by doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">IPython.ipapi</span>
<span class="n">ip</span> <span class="o">=</span> <span class="n">IPython</span><span class="o">.</span><span class="n">ipapi</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="n">ip</span><span class="o">.</span><span class="n">set_hook</span><span class="p">(</span><span class="s">&#39;complete_command&#39;</span><span class="p">,</span> <span class="n">apt_completers</span><span class="p">,</span> <span class="n">re_key</span> <span class="o">=</span> <span class="s">&#39;.*apt-get&#39;</span><span class="p">)</span>

<span class="c"># or instead of re_key, do str_key = &#39;apt-get&#39; which is quicker but doesn&#39;t handle &#39;sudo apt-get&#39;.</span>
</pre></div>
</div>
<p>There are some completers already in place.</p>
<p>For example the &#8216;cd&#8217; completer that handles directory history (-NUM) and bookmarks (-b):</p>
<div class="highlight-python"><pre>[dl]|6&gt; cd /cygwin/
[cygwin]|7&gt; cd &lt;tab&gt;
bin/ etc/ lib/ tmp/ usr/ var/
[cygwin]|7&gt; cd -&lt;tab&gt;
-0 [Q:\ipython] -1 [q:\home]    -2 [q:\dl]      -3 [q:\cygwin]
[cygwin]|7&gt; %bookmark cyg
[cygwin]|8&gt; cd -b &lt;tab&gt;
lscr cyg
[cygwin]|8&gt; cd -b cyg</pre>
</div>
<p>Or the &#8216;import&#8217; completer:</p>
<div class="highlight-python"><pre>[cygwin]|8&gt; import IPyt&lt;tab&gt;
IPython. ipython
[cygwin]|8&gt; import IPython.&lt;tab&gt;
IPython.                   IPython.Logger             IPython.excolors           IPython.platutils_posix
IPython.ColorANSI          IPython.Magic              IPython.genutils           IPython.platutils_win32
IPython.ConfigLoader       IPython.OInspect           IPython.hooks              IPython.rlineimpl
IPython.CrashHandler       IPython.OutputTrap         IPython.ipapi              IPython.strdispatch
IPython.DPyGetOpt          IPython.Prompts            IPython.iplib              IPython.ultraTB
IPython.Debugger           IPython.PyColorize         IPython.ipmaker            IPython.upgrade_dir
IPython.Extensions.        IPython.Release            IPython.ipstruct           IPython.usage
IPython.FakeModule         IPython.Shell              IPython.irunner            IPython.wildcard
IPython.Gnuplot2           IPython.background_jobs    IPython.macro              IPython.winconsole
IPython.GnuplotInteractive IPython.completer          IPython.numutils
IPython.GnuplotRuntime     IPython.deep_reload        IPython.platutils
IPython.Itpl               IPython.demo               IPython.platutils_dummy
[cygwin]|8&gt; import IPython.Extensions.&lt;tab&gt;
IPython.Extensions.                           IPython.Extensions.ipy_linux_package_managers
IPython.Extensions.InterpreterExec            IPython.Extensions.ipy_pydb
IPython.Extensions.InterpreterPasteInput      IPython.Extensions.ipy_stock_completers
IPython.Extensions.PhysicalQInput             IPython.Extensions.ipy_system_conf
IPython.Extensions.PhysicalQInteractive       IPython.Extensions.jobctrl
IPython.Extensions.astyle                     IPython.Extensions.ledit
IPython.Extensions.clearcmd                   IPython.Extensions.numeric_formats
IPython.Extensions.ext_rehashdir              IPython.Extensions.path
IPython.Extensions.ext_rescapture             IPython.Extensions.pickleshare
IPython.Extensions.ibrowse                    IPython.Extensions.pspersistence
IPython.Extensions.ipipe                      IPython.Extensions.pydb_ipy
IPython.Extensions.ipy_defaults               IPython.Extensions.win32clip</pre>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="clearer"></div>
    </div>
    </div>

    <div class="footer-wrapper">
      
    <div class="footer">
        &copy; Copyright the IPython development team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
    </div>

  </body>
</html>